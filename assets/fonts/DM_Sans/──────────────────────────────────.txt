// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// 1.  NAVIGATION RÃ‰ACTIVE  (hamburger sur petit Ã©cran)
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function editNav() {
  // RÃ©cupÃ¨re le conteneur du menu
  const x = document.getElementById("myTopnav");

  /*  
   * Si sa classe vaut exactement "topnav" on ajoute " responsive"
   *     â†’ le CSS passera en mode colonne (voir media-query)
   * Sinon on repasse Ã  la classe de base.
   */
  x.className = x.className === "topnav" ? "topnav responsive" : "topnav";
}
// Rend la fonction accessible aux attributs inline (onclick="editNav()")
window.editNav = editNav;



// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// 2.  RÃ‰FÃ‰RENCES DOM  (on stocke tout ce dont on aura besoin)
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const modalBg           = document.querySelector(".bground");             // overlay fond sombre
const modalBtns         = document.querySelectorAll(".modal-btn");        // 2 boutons â€œje mâ€™inscrisâ€
const closeSpan         = document.getElementById("close");               // croix dans le formulaire
const closeThankYouBtn  = document.getElementById("closeThankYou");       // bouton Fermer sur lâ€™Ã©cran Merci
const closeThankYouSpan = document.getElementById("closeThankYouSpan");   // croix Ã©cran Merci
const form              = document.forms["reserve"];                      // <form name="reserve">



// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// 3.  OUVERTURE / FERMETURE DE LA MODALE
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// ğŸ‘‰ 3-a  OUVERTURE : clic sur nâ€™importe quel bouton â€œje mâ€™inscrisâ€
modalBtns.forEach(btn =>
  btn.addEventListener("click", () => {
    modalBg.style.display = "block";                                      // on affiche lâ€™overlay + la fenÃªtre
  })
);

// ğŸ‘‰ 3-b  FERMETURE : quatre faÃ§ons de refermer
closeSpan        .addEventListener("click", closeModal);                  // croix formulaire
closeThankYouSpan.addEventListener("click", closeModal);                  // croix Ã©cran Merci
closeThankYouBtn .addEventListener("click", closeModal);                  // bouton Fermer Ã©cran Merci
window.addEventListener("click", e => {                                   // clic hors de la fenÃªtre
  if (e.target === modalBg) closeModal();
});

function closeModal() {
  // Cache lâ€™overlay
  modalBg.style.display = "none";

  // RÃ©-affiche le formulaire, cache la page Merci
  document.getElementById("form-body").style.display = "block";
  document.getElementById("thank-you").style.display = "none";

  // Remet la bonne croix
  closeSpan.style.display         = "block";
  closeThankYouSpan.style.display = "none";

  // (optionnel) on pourrait conserver les valeurs âœ reset dÃ©sactivÃ©
  // form.reset();

  // Supprime tous les messages dâ€™erreur encore prÃ©sents
  document.querySelectorAll(".error-message").forEach(el => el.remove());
}



// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// 4.  VALIDATION DU FORMULAIRE
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
form.addEventListener("submit", e => {
  e.preventDefault();                                                     // empÃªche lâ€™envoi rÃ©el
  document.querySelectorAll(".error-message").forEach(                    // nettoie les anciens msgs
    el => el.remove()
  );

  let isValid = true;                                                     // drapeau global

  /* 4-1. Champs obligatoires (texte / email / date / number) */
  const requiredIds = ["first","last","email","birthdate","quantity"];
  requiredIds.forEach(id => {
    const input = document.getElementById(id);

    // a) vide
    if (!input.value.trim()) {
      isValid = false;
      showError(input,"Ce champ est requis.");
      return;                                                             // skip le reste des tests pour ce champ
    }

    // b) PrÃ©nom + Nom : < 2 caractÃ¨res
    if (["first","last"].includes(id) && input.value.trim().length < 2) {
      isValid = false;
      showError(input,"Veuillez entrer 2 caractÃ¨res ou plus pour ce champ.");
    }
  });

  /* 4-2. Radio : aucun tournoi sÃ©lectionnÃ© */
  const radios = document.querySelectorAll('input[name="location"]');
  if (![...radios].some(r => r.checked)) {
    isValid = false;
    showError(radios[0].closest(".formData"),"Veuillez choisir un tournoi.");
  }

  /* 4-3. Checkbox CGU non cochÃ©e */
  const terms = document.getElementById("checkbox1");
  if (!terms.checked) {
    isValid = false;
    showError(terms.parentElement,"Vous devez accepter les conditions.");
  }

  /* 4-4. Date de naissance vide */
  const birthInput = document.getElementById("birthdate");
  if (!birthInput.value) {
    isValid = false;
    showError(birthInput,"Vous devez entrer votre date de naissance.");
  }

  /* 4-5. Email non valide (regex simple) */
  const emailInput = document.getElementById("email");
  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  if (!emailRegex.test(emailInput.value.trim())) {
    isValid = false;
    showError(emailInput,"Adresse e-mail invalide.");
  }

  /* 4-6. QuantitÃ© non numÃ©rique ou < 0 */
  const qtyInput = document.getElementById("quantity");
  if (
    qtyInput.value.trim() === "" ||
    isNaN(qtyInput.value)        ||
    Number(qtyInput.value) < 0
  ) {
    isValid = false;
    showError(qtyInput,"Veuillez indiquer un nombre valide.");
  }

  /* 4-7. Si TOUT est valide â†’ Ã©cran â€œMerciâ€ */
  if (isValid) {
    document.getElementById("form-body").style.display = "none";            // cache le form
    document.getElementById("thank-you").style.display = "flex";            // montre Merci
    closeSpan.style.display         = "none";                               // cache la croix du form
    closeThankYouSpan.style.display = "block";                              // montre la croix de Merci
  }
});



// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// 5.  Affichage dâ€™un message dâ€™erreur sous un champ donnÃ©
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function showError(element, message) {
  const error = document.createElement("span");
  error.className = "error-message";                                        // pour le style CSS
  error.style.color = "#e54858";                                            // rouge
  error.setAttribute("role","alert");                                       // lu par les lecteurs dâ€™Ã©cran
  error.textContent = message;
  element.insertAdjacentElement("afterend", error);                         // juste aprÃ¨s le champ
}